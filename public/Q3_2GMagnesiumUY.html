<!DOCTYPE html>
<html lang="en">
    <style>
        body{
        padding: 25px;
        font-family: arial;
        }
        .title {
            color: #ab1919;
        }

        p {
            color: rgb(105, 81, 212);
        }

        label {
            color: #cd0dbd;
        }
    </style>
    <head>
        <title>Sign-up Page</title>
    </head>
    <nav>
        <a href="viewSignUps.html"> Saved Accounts </a>
    </nav>
    <body>
        <form id="signupform"
        onreset="return confirm('Are you sure you would like to reset the form?');"
        >
            <p>
                <label for="studentid">StudentID:</label>
                <input type="number" id="studentid" name="studentid" onblur="resetColor(this)">
                <br> <br>
                <label for="name">Full Name:</label>
                <input type="text" id="name" name="name" onblur="resetColor(this)">
                <br> <br>
                <label for="birthday">Birthday:</label>
                <input type="date" id="birthday" name="birthday" onblur="resetColor(this)">
                <br> <br>
                <label for="email">Email address:</label>
                <input type="email" id="email" name="email" onblur="resetColor(this)">
                <br> <br>
                <label for="mobilephone">Mobile Phone:</label>
                <input type="text" id="mobilephone" name="mobilephone" onblur="resetColor(this)">
                <br> <br>
                <label for="gradelevel">Grade Level:</label>
                <select name="gradelevel" id="gradelevel">
                    <option value="7">Grade 7</option>
                    <option value="8">Grade 8</option>
                    <option value="9">Grade 9</option>
                    <option value="10">Grade 10</option>
                    <option value="11">Grade 11</option>
                    <option value="12">Grade 12</option>
                </select>
                <br> <br>
                <p>Intern/Extern:</p>
                <input type="radio" id="intern" name="option" value="intern">
                <label for="intern">Intern</label>
                <input type="radio" id="extern" name="option" value="extern">
                <label for="extern">Extern</label>
                <br> <br>
                <label for="club">Club:</label>
                <select name="club" id="club">
                    <option value="Alianti">Alianti</option>
                    <option value="Volant">Volant</option>
                    <option value="MUN">MUN</option>
                    <option value="Flux">Flux</option>
                    <option value="Care">Care</option>
                </select>
                <br> <br>
                <label for="reason">Why do you want to join?:</label>
                <br> <br>
                <textarea id="tArea" name="reason" rows="10" cols="50" onblur="resetColor(this)"></textarea>
                <br> <br>
                <input type = 'submit' value="submit">
                <input type = "reset" value = "Reset">
                <button type="button" onclick="location.href='viewSignUps.html'">View Signups</button>
            </p>
        </form>
        <script>
            function resetColor(ele) {
                if (ele.value) {
                    console.log(ele);
                    ele.style.backgroundColor = "white";
                } else {
                    console.log(ele);
                    ele.style.backgroundColor = "red"; 
                }
            }

            const form = document.getElementById("signupform");

            form.addEventListener("submit", function(e) {
                e.preventDefault();

                if (confirm("Are you sure you would like to save your work?")) {
                } else{
                    return;
                }

                const studentID = document.getElementById("studentid").value;
                const name = document.getElementById("name").value;
                const birthday = document.getElementById("birthday").value;
                const email = document.getElementById("email").value;
                const mobilephone = document.getElementById("mobilephone").value;
                const gradelevel = document.getElementById("gradelevel").value;
                const club = document.getElementById("club").value;
                const reason = document.getElementById("tArea").value;
                let ans = "";
                if (document.getElementById("intern").checked) ans = "intern";
                if (document.getElementById("extern").checked) ans = "extern";

                const signupInfo = {
                    studentID: studentID,
                    name: name,
                    birthday: birthday,
                    email: email,
                    mobilephone: mobilephone,
                    gradelevel: gradelevel,
                    option: ans,
                    club: club,
                    reason: reason
                };

                let saved = localStorage.getItem("savedsignups");
                if (saved) {
                    saved = JSON.parse(saved);
                } else {
                    saved = [];
                    console.log(saved);
                }

                saved.push(signupInfo);
                localStorage.setItem("savedsignups", JSON.stringify(saved));
                console.log("savedsignups:", saved);
                form.reset();
            });
        </script>
    </body>
</html>